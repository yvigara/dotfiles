# vim: ft=zsh

export ZSH_CACHE_DIR="$XDG_CACHE_HOME/zsh"
export RIPGREP_CONFIG_PATH="$XDG_CONFIG_HOME/ripgrep/config"

# Set any zstyles you might use for configuration.
[[ ! -f ${HOME}/.zstyles ]] || source ${HOME}/.zstyles

setopt globdots

# Uncomment the following line to use case-sensitive completion.
CASE_SENSITIVE="true"
ZSH_AUTOSUGGEST_STRATEGY=(history completion)
COMPLETION_WAITING_DOTS="true"
ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE="bold"

# Set the root name of the plugins files (.txt and .zsh) antidote will use.
zsh_plugins=${HOME}/.zsh_plugins

# Ensure the .zsh_plugins.txt file exists so you can add plugins.
[[ -f ${zsh_plugins}.txt ]] || touch "${zsh_plugins}.txt"

# Lazy-load antidote from its functions directory.
source "${HOMEBREW_PREFIX:-$(brew --prefix)}/opt/antidote/share/antidote/antidote.zsh"

# Generate a new static file whenever .zsh_plugins.txt is updated.
if [[ ! ${zsh_plugins}.zsh -nt ${zsh_plugins}.txt ]]; then
  antidote bundle <"${zsh_plugins}.txt" >|"${zsh_plugins}.zsh"
fi

# Source your static plugins file.
source "${zsh_plugins}.zsh"

# export MANPATH="/usr/local/man:$MANPATH"

# You may need to manually set your language environment
# export LANG=en_US.UTF-8

alias l='ls -l'
alias ll='ls -lg'
alias la='ls -a'
alias lla='ls -la'
alias lt='ls --tree'

alias vi="nvim"
alias vim="nvim"
alias vimdiff="nvim -d"
alias pn="pnpm"

{{ if eq .chezmoi.os "darwin" -}}
### MANAGED BY RANCHER DESKTOP START (DO NOT EDIT)
export PATH="$HOME/.rd/bin:$PATH"
### MANAGED BY RANCHER DESKTOP END (DO NOT EDIT)

{{ end -}}
# Enable Kubeswitch
source <(switcher init zsh)
source <(switch completion zsh)
alias s=switch

[[ ! -f "${HOME}/.cargo/env" ]] || source "${HOME}/.cargo/env"

# Local customizations - create this file for machine-specific settings
[[ ! -f "${HOME}/.zshrc.local" ]] || source "${HOME}/.zshrc.local"

if [[ -n "$CURSOR_AGENT" ]]; then
  export GIT_PAGER=cat
  # Skip theme initialization for better compatibility
else
  eval "$(starship init zsh)"
fi
